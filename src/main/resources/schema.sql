CREATE TABLE IF NOT EXISTS accounts
(
    id      BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    owner   VARCHAR(512)     NOT NULL,
    pin     INTEGER          NOT NULL,
    balance DOUBLE PRECISION NOT NULL
);

CREATE TABLE IF NOT EXISTS transactions
(
    id        BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    sender    BIGINT           NOT NULL REFERENCES accounts (id) ON DELETE CASCADE,
    recipient BIGINT           NOT NULL REFERENCES accounts (id) ON DELETE CASCADE,
    amount    DOUBLE PRECISION NOT NULL,
    date      TIMESTAMP        NOT NULL
);